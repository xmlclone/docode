[toc]

# 基础

## 文件格式

gguf
Safetensors

## 模型平台

ollama
xinference

## 推理引擎

vllm: linux优先推荐使用，是一个支持高并发的高性能大模型推理引擎。是基于pytorch
sglang: linux优先推荐使用。多模态优先推荐使用
llama.cpp: 资源有限情况下推荐使用，比如一些边缘设备上，比如嵌入式设备或移动终端。在vllm、sglang、MLX不支持的情况下推荐使用
transformers: 对于其它都不支持的情况下使用
MLX: mac上优先推荐使用，MLX-lm 用来在苹果 silicon 芯片上提供高效的 LLM 推理

## 量化

# 平台

## xinference

https://inference.readthedocs.io/zh-cn/latest/getting_started/using_xinference.html

```sh
docker pull registry.cn-hangzhou.aliyuncs.com/xprobe_xinference/xinference

docker tag registry.cn-hangzhou.aliyuncs.com/xprobe_xinference/xinference xprobe/xinference

# XINFERENCE_MODEL_SRC 指定模型仓库，默认是 HuggingFace ，当然也可以不指定后续通过webui界面选择
docker run -itd --name xi -v D:/docker/mount/xinference:/root/.xinference -e XINFERENCE_HOME=/root/.xinference -e XINFERENCE_MODEL_SRC=modelscope -p 9998:9997 --gpus all xprobe/xinference xinference-local -H 0.0.0.0 --log-level debug

http://127.0.0.1:9998/ui
http://127.0.0.1:9998/docs

docker exec -it xic

# 手动下载模型，如从huggingface上下载后本地在xinference注册
export HF_ENDPOINT="https://hf-mirror.com" # Linux/macOS
cd /root/.xinference
mkdir -p huggingface/Qwen/Qwen2.5-7B-Instruce-1M
pip install huggingface
huggingface-cli download Qwen/Qwen2.5-7B-Instruct-1M --local-dir /root/.xinference/huggingface/Qwen/Qwen2.5-7B-Instruce-1M

# 如果通过 docker 启动的, xinference 服务一般配置为如下url：
http://host.docker.internal:9998  (注意端口号，需要是上面被映射出来的端口)
```

## ollama

```sh
docker pull ollama/ollama
docker run --rm -it --gpus=all ollama/ollama
docker run -d --gpus=all -v ollama:/root/.ollama -p 11434:11434 --name ollama ollama/ollama

# 可以通过配置下面的环境变量，设定 ollama 下载模型的路径
OLLAMA_MODELS

# 如果通过 docker 启动的, ollama 服务一般配置为如下url：
http://host.docker.internal:11434
```

- [ollama](https://ollama.com/search)
- [ollama-github](https://github.com/ollama/ollama)

# 硬件与编码

## nvidia

```sh
nvidia-smi -l 3
```

## cuda & torch版本

```sh
# 稳定版看stable，其它可以看preview
https://pytorch.org/get-started/locally/s
```

```python
import torch
torch.device("cuda" if torch.cuda.is_available() else "cpu")
```

# tips

```md
# 目标
- 结合产品历史版本和背景信息，为新需求完成全面的测试设计，输出最终设计的测试场景

# 流程
- 识别历史版本与背景信息中与新需求相关的点，提取后以列表形式输出
- 分析新需求的高风险场景（例如：边界值处理、并发压力、异常流程），以列表形式输出
- 基于以上提取的信息，完成功能点测试（正向场景、反向场景、边界值）、性能测试、兼容性测试场景的设计，以列表形式输出设计测测试场景名

# 输出
- 设计的测试场景，只需要输出测试场景名，不要输出其它额外信息
```

```md
新需求：登录页面新增验证码，当用户名、密码和验证码均输入正确，用户登录成功
历史需求： 登录页面包含用户名和密码，用户输入正确的用户名和密码后，点击登录按钮，登录成功，否则登录失败
```

```md
<details style="color:gray;background-color: #f8f8f8;padding: 8px;border-radius: 4px;" open> <summary> Thinking... </summary>好的，我现在需要帮用户设计新需求的测试场景。用户的新需求是在登录页面新增验证码，只有当用户名、密码和验证码都正确时才能登录成功。历史需求是原来的登录页面只有用户名和密码，正确的话就能登录，否则失败。

首先，我得先根据流程步骤来。第一步是识别历史版本和背景信息中相关的点，然后列出它们。历史需求中的登录页面已经有用户名和密码的校验，现在新增验证码。所以相关的点应该包括原来的登录成功和失败的场景，以及验证码相关的处理是否会影响原有的逻辑。可能还要考虑验证码的有效期、输入错误的处理，或者是否和原来的错误信息有冲突。

接下来分析高风险场景。边界值方面，验证码通常是4到6位的数字或字母组合，所以输入极限长度或者非法字符可能是个问题。并发压力的话，比如很多用户同时输入验证码会不会有冲突或者服务器处理不过来。异常流程的话，比如验证码过期了，或者用户输入错误超过次数被锁定之类的。

然后要设计功能点测试、性能测试和兼容性测试的案例。功能点方面，正向就是三个都正确的情况，反向包括用户名、密码或验证码任何一个错误的情况，还有同时错的组合。边界值的话，比如验证码是正好长度的最小和最大，或者输入特殊符号。性能测试要看高并发下的表现，比如同时有很多用户登录，系统会不会崩。兼容性测试需要考虑不同浏览器、设备以及分辨率下的显示是否正常，验证码是否能正确显示和验证。

现在要把这些整理成列表。首先历史相关的点可能包括：

- 用户名密码校验逻辑是否受影响
- 原有的登录成功和失败场景是否还有效
- 验证码与原有字段的交互（比如同时错误时的提示）
- 验证码的获取方式和显示位置
- 可能的历史数据迁移问题（比如旧用户是否需要适应新字段）

高风险场景可能有：

- 边界值：验证码为空，输入少一位或超过长度
- 错误输入导致封禁或验证码过期
- 验证码同时被多次使用
- 多用户并发请求验证验证码
- 网络延迟或验证码服务不可用时的处理

测试场景设计部分：

功能测试正向：三个都正确，登录成功；反向包括用户名错、密码错、验证码错，两两错，全错。边界值输入验证码的极端情况。性能测试需要模拟大量用户同时登录，看系统响应时间和错误率。兼容性测试要覆盖不同环境。

可能还要考虑验证码的刷新机制，比如用户点击刷新后的结果。还有验证码是否区分大小写，如果是的话，输入大小写混合的情况。或者验证码的时效性，比如设置的有效时间是否符合预期，过期后是否失效。

另外，异常流程中的验证码错误多次后是否有次数限制，类似于密码错误锁定账户的功能，这里可能需要测试验证码输入错误次数过多是否触发类似的机制，或者是否有对应的提示信息。比如用户连续输错验证码五次后，是否要锁定账号或暂停一段时间才能继续尝试。

还要考虑验证码是否与用户会话绑定，比如用户开两个窗口同时操作时，是否每个窗口有独立的验证码，或者是否存在跨窗口使用的漏洞。比如用户在A窗口获取验证码，然后在B窗口登录是否能用同一个验证码，这可能涉及到安全性问题。

可能还需要测试验证码图片或短信验证码的发送是否正常，比如如果验证码是通过短信发送的，是否发送成功，是否有延迟等问题。但根据用户的需求描述，可能验证码是在页面上显示的图片，因此需要测试图片是否清晰可读，以及是否被干扰。

对于兼容性测试，移动端和PC端的展示是否合适，比如验证码在小屏幕上是否显示正常，是否需要手动聚焦输入框或者自动滚动到验证码的位置。

最后要确保所有测试场景都是名称列表，不需要细节，所以需要把想法转化为合适的测试场景名。比如正向场景就是“输入正确的用户名、密码和验证码，登录成功”，反向的话像“输入正确的用户名和密码，但验证码错误，登录失败”等等。

可能还需要测试验证码的时效性，比如过期后重新获取验证码再成功登录，或者超过有效时间导致登录失败。同时，当用户名或密码错误时，验证码是否还是被验证，还是直接不处理（比如先验用户名密码再验证码？或者同时验证？），这里可能需要看需求文档中的逻辑，但根据用户描述是必须三者都正确，所以即使用户名密码正确但验证码错误，还是登录失败，反之亦然。因此需要测试各字段的单独和组合错误情况。

总之，我需要把所有这些思考点整理成三个列表：历史相关点，高风险场景，然后是测试场景名。注意用户需要的是每个测试场景的名称，按功能、性能、兼容性分类。
</details>

### 1. 历史版本与背景信息相关点  
- 用户名和密码的校验逻辑是否因新增验证码而失效  
- 原先“登录失败”场景（如密码错误）是否仍需保留并测试  
- 验证码输入框与原有字段的逻辑交互（如同时错误的提示）  
- 验证码是否需要与用户名/密码进行会话绑定  

---

### 2. 高风险场景  
- **边界值**：验证码为空、长度不足/超限、特殊符号输入（如中文/标点）  
- **并发压力**：大量用户同时提交验证码导致鉴权服务不可用  
- **异常流程**：验证码过期、验证码输入错误次数超过阈值封禁用户  
- **逻辑冲突**：用户名/密码正确但验证码错误时，是否重复消耗账号锁定计数器  

---

### 3. 测试场景名称设计  

#### **功能点测试**  
- **正向场景**  
  1. 输入正确的用户名、密码和验证码，登录成功  
  2. 验证码有效期期内输入正确，登录成功  
  3. 多次刷新验证码后输入正确的验证码，登录成功  

- **反向场景**  
  4. 输入正确的用户名和密码，验证码错误，登录失败  
  5. 用户名错误、密码正确、验证码正确，登录失败  
  6. 用户名正确、密码错误、验证码正确，登录失败  
  7. 用户名、密码、验证码均错误，登录失败  
  8. 验证码过期后继续使用，登录失败  

- **边界值场景**  
  9. 输入验证码的最小位数（如4位），登录成功  
  10. 输入验证码的最大位数（如6位），登录成功  
  11. 验证码输入为空，登录失败  
  12. 验证码输入非数字/字母（如中文符号），登录失败  

#### **性能测试**  
13. 短时内高并发用户提交登录请求（含验证码），系统响应正常  
14. 持续高负载下验证码服务无积压，登录通过率正常  

#### **兼容性测试**  
15. 不同浏览器（Chrome/Firefox/Safari）下验证码图片显示正常，输入验证功能可用  
16. 移动端设备（iPhone/Android）上验证码输入框聚焦、键盘兼容性正常  
17. 不同分辨率的屏幕下验证码与登录表单对齐无错位  
18. 系统语言切换后验证码提示文案与界面逻辑一致  

---  
（注：仅列出测试场景名，无额外说明）
```